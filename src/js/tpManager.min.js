"use strict";var tpManager={gameState:{randomWord:"",hiddenLetters:null,hints:null,lettersGuessed:[],spacesInword:null,hintLetters:[],lives:6,player1:{name:null,score:0},player2:{name:null,score:0},playerToGuess:2},e:{wordContainer:document.getElementById("game__content-word"),lettersGuessedCont:document.getElementById("game__content-letter-guessed-cont"),inputs:document.querySelectorAll(".game__content-letter--input"),hiddenLetters:null,hintsBtn:document.getElementById("game__content-hints_btn"),hangmanImg:document.getElementById("hangman_img"),nextRoundBtn:document.getElementById("next_round"),playerToGuess:document.getElementById("player_to_guess"),showScoreBtn:document.getElementById("show_score"),scoreBoard:document.getElementById("score_board"),scoreBoardClose:document.getElementById("game-result__close"),scoreBoardP1Name:document.getElementById("game-result__p1Name"),scoreBoardP1Score:document.getElementById("game-result__p1Score"),scoreBoardP2Name:document.getElementById("game-result__p2Name"),scoreBoardP2Score:document.getElementById("game-result__p2Score")},getRandomWord:function(){return localStorage.getItem("twoPlayerWord")},setWord:function(word){for(var i=0;i<word.length;i++){var div=document.createElement("div");" "===word[i]?div.className="game__content-letter game__content-letter--hidden game__content-letter--space":div.className="game__content-letter game__content-letter--hidden",this.e.wordContainer.appendChild(div)}this.e.hiddenLetters=document.querySelectorAll(".game__content-letter--hidden")},removeLSState:function(){localStorage.removeItem("playerTurn"),localStorage.removeItem("twoPlayerHints"),localStorage.removeItem("twoPlayerWord"),localStorage.setItem("gameSet",!0)},setState:function(){null===this.getRandomWord()?window.location.href="/":this.gameState.randomWord=this.getRandomWord().toLowerCase(),this.gameState.hiddenLetters=this.gameState.randomWord.length,this.gameState.spacesInword=this.getSpacesInWord(),this.gameState.hiddenLetters=this.gameState.hiddenLetters-this.gameState.spacesInword,this.gameState.hintLetters=this.gameState.randomWord.replace(/\s/g,"").split(""),this.gameState.lives=6,this.gameState.lettersGuessed=[],this.setWord(this.gameState.randomWord),this.gameState.hints=parseInt(localStorage.getItem("twoPlayerHints")),this.e.hintsBtn.innerHTML="Hints ("+localStorage.getItem("twoPlayerHints")+")",this.e.hangmanImg.src="../../src/images/hangman_6.png",this.gameState.player1.name=localStorage.getItem("player1Name"),this.gameState.player2.name=localStorage.getItem("player2Name"),this.e.playerToGuess.innerHTML="Player To Guess: "+this.getPlayerToGuessName(),this.updateScoreUI()},getPlayerToGuessName:function(){return 1===this.gameState.playerToGuess?this.gameState.player1.name:this.gameState.player2.name},getSpacesInWord:function(){for(var spaces=0,i=0;i<this.gameState.randomWord.length;i++)" "===this.gameState.randomWord[i]&&(spaces+=1);return spaces},guess:function(letterGuess){if(0!==this.gameState.lives)if(this.gameState.randomWord.includes(letterGuess)){var newIndices=this.findLetters(letterGuess);if(this.replaceLetters(newIndices,letterGuess),0===this.gameState.hiddenLetters){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=document.querySelectorAll(".game__content-letter--shown")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var letter=_step.value;letter.style.color="green",letter.style.textShadow=".1rem .1rem .5rem green"}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.style.pointerEvents="none"}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}this.e.hintsBtn.style.pointerEvents="none",this.updateWinScore(),this.updateScoreUI()}}else this.gameState.lettersGuessed.includes(letterGuess)||this.incorrectLetter(letterGuess)},findLetters:function(letter){for(var indicies=[],i=0;i<this.gameState.randomWord.length;i++)this.gameState.randomWord[i]===letter&&indicies.push(i);return indicies},replaceLetters:function(indices,letter){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=indices[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var i=_step3.value;this.e.hiddenLetters[i].innerHTML=letter,this.e.hiddenLetters[i].className="game__content-letter game__content-letter--shown",this.gameState.hiddenLetters--,this.gameState.hintLetters=this.gameState.hintLetters.filter(function(string){return string!==letter})}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}},incorrectLetter:function(letter){var newLetter=document.createElement("div");newLetter.className="game__content-letter game__content-letter--guessed";var span=document.createElement("span");span.className="game__content-letter-text";var text=document.createTextNode(letter);if(span.appendChild(text),newLetter.appendChild(span),this.e.lettersGuessedCont.appendChild(newLetter),this.gameState.lettersGuessed.push(letter),this.gameState.lives--,this.e.hangmanImg.src="../../src/images/hangman_"+this.gameState.lives+".png",0===this.gameState.lives){this.showWord();var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=document.querySelectorAll(".game__content-letter--shown")[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _letter=_step4.value;_letter.style.color="crimson",_letter.style.textShadow=".1rem .1rem .5rem crimson"}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var input=_step5.value;input.style.pointerEvents="none",input.style.background="#ccc"}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},swapTurns:function(){1===this.gameState.playerToGuess?this.gameState.playerToGuess=2:this.gameState.playerToGuess=1},updateWinScore:function(){1===this.gameState.playerToGuess?this.gameState.player1.score++:this.gameState.player2.score++},updateScoreUI:function(){this.e.scoreBoardP1Name.innerHTML=this.gameState.player1.name,this.e.scoreBoardP2Name.innerHTML=this.gameState.player2.name,this.e.scoreBoardP1Score.innerHTML=this.gameState.player1.score,this.e.scoreBoardP2Score.innerHTML=this.gameState.player2.score},useHint:function(){var randomLetter=this.gameState.hintLetters[Math.floor(Math.random()*this.gameState.hintLetters.length)],_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var input=_step6.value;input.innerHTML.toLowerCase()===randomLetter&&(input.style.pointerEvents="none",input.style.background="#ccc")}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return randomLetter},updateHintStatus:function(){this.gameState.hints--,this.e.hintsBtn.innerHTML="Hints ("+this.gameState.hints+")"},showWord:function(){for(var randomword=this.gameState.randomWord.split(""),i=0;i<this.e.hiddenLetters.length;i++)this.e.hiddenLetters[i].innerHTML=randomword[i],this.e.hiddenLetters[i].className="game__content-letter game__content-letter--shown"},setListeners:function(){var _this=this,_loop=function(input){input.addEventListener("click",function(e){_this.guess(e.target.innerHTML.toLowerCase()),input.style.pointerEvents="none",input.style.background="#ccc"})},_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_loop(_step7.value)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}this.e.hintsBtn.addEventListener("click",function(){0!==_this.gameState.hints&&0!==_this.gameState.lives?(_this.guess(_this.useHint()),_this.updateHintStatus()):alert("Hints are not usable")}),this.e.nextRoundBtn.addEventListener("click",function(){_this.swapTurns(),sessionStorage.setItem("gameState",JSON.stringify(_this.gameState)),window.location.href="/?mode-twoplayers-setup-2.html"}),this.e.showScoreBtn.addEventListener("click",function(){_this.e.scoreBoard.style.transform="scale(1) translate(-50%, -50%)"}),this.e.scoreBoardClose.addEventListener("click",function(){_this.e.scoreBoard.style.transform="scale(0) translate(-50%, -50%)"})},updateGameState:function(){this.gameState=JSON.parse(sessionStorage.getItem("gameState"))},init:function(){null!==sessionStorage.getItem("gameState")&&(this.updateGameState(),sessionStorage.removeItem("gameState")),this.setState(),this.removeLSState(),this.setListeners()}};tpManager.init();