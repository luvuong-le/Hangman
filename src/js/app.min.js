"use strict";var appManager={gameState:{category:"",categoryWords:null,randomWord:"",hiddenLetters:null,hints:3,lettersGuessed:[],spacesInword:null,hintLetters:[],lives:6},e:{wordContainer:document.getElementById("game__content-word"),lettersGuessedCont:document.getElementById("game__content-letter-guessed-cont"),inputs:document.querySelectorAll(".game__content-letter--input"),hiddenLetters:null,hintsBtn:document.getElementById("game__content-hints_btn"),hangmanImg:document.getElementById("hangman_img"),nextRoundBtn:document.getElementById("next_round"),categoryTitle:document.getElementById("category_span")},getCategory:function(){return localStorage.getItem("category")},saveCategoryWordsLS:function(){var _this=this;fetch("./data/game-content.json").then(function(res){return res.json()}).then(function(data){localStorage.setItem("categoryWords",JSON.stringify(data))}).then(function(){_this.setState(),_this.removeLSState()}).catch(function(error){console.log("Request failed",error)})},getRandomWord:function(){return this.gameState.categoryWords[Math.floor(Math.random()*this.gameState.categoryWords.length)]},setWord:function(word){for(var i=0;i<word.length;i++){var div=document.createElement("div");" "===word[i]?div.className="game__content-letter game__content-letter--hidden game__content-letter--space":div.className="game__content-letter game__content-letter--hidden",this.e.wordContainer.appendChild(div)}this.e.hiddenLetters=document.querySelectorAll(".game__content-letter--hidden")},setCategoryWords:function(){return JSON.parse(localStorage.getItem("categoryWords"))[this.getCategory().toLowerCase()]},removeLSState:function(){localStorage.removeItem("categoryWords")},setState:function(){this.gameState.categoryWords=this.setCategoryWords(),this.gameState.randomWord=this.getRandomWord().toLowerCase(),this.gameState.hiddenLetters=this.gameState.randomWord.length,this.gameState.spacesInword=this.getSpacesInWord(),this.gameState.hiddenLetters=this.gameState.hiddenLetters-this.gameState.spacesInword,this.gameState.hintLetters=this.gameState.randomWord.replace(/\s/g,"").split(""),this.setWord(this.gameState.randomWord)},getSpacesInWord:function(){for(var spaces=0,i=0;i<this.gameState.randomWord.length;i++)" "===this.gameState.randomWord[i]&&(spaces+=1);return spaces},guess:function(letterGuess){if(0!==this.gameState.lives)if(this.gameState.randomWord.includes(letterGuess)){var newIndices=this.findLetters(letterGuess);if(this.replaceLetters(newIndices,letterGuess),0===this.gameState.hiddenLetters){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=document.querySelectorAll(".game__content-letter--shown")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var letter=_step.value;letter.style.color="green",letter.style.textShadow=".1rem .1rem .5rem green"}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.style.pointerEvents="none"}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}this.e.hintsBtn.style.pointerEvents="none"}}else this.gameState.lettersGuessed.includes(letterGuess)||this.incorrectLetter(letterGuess)},findLetters:function(letter){for(var indicies=[],i=0;i<this.gameState.randomWord.length;i++)this.gameState.randomWord[i]===letter&&indicies.push(i);return indicies},replaceLetters:function(indices,letter){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=indices[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var i=_step3.value;this.e.hiddenLetters[i].innerHTML=letter,this.e.hiddenLetters[i].className="game__content-letter game__content-letter--shown",this.gameState.hiddenLetters--,this.gameState.hintLetters=this.gameState.hintLetters.filter(function(string){return string!==letter})}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}},incorrectLetter:function(letter){var newLetter=document.createElement("div");newLetter.className="game__content-letter game__content-letter--guessed";var span=document.createElement("span");span.className="game__content-letter-text";var text=document.createTextNode(letter);if(span.appendChild(text),newLetter.appendChild(span),this.e.lettersGuessedCont.appendChild(newLetter),this.gameState.lettersGuessed.push(letter),this.gameState.lives--,this.e.hangmanImg.src="../../src/images/hangman_"+this.gameState.lives+".png",0===this.gameState.lives){this.showWord();var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=document.querySelectorAll(".game__content-letter--shown")[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _letter=_step4.value;_letter.style.color="crimson",_letter.style.textShadow=".1rem .1rem .5rem crimson"}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_step5.value.style.pointerEvents="none"}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},useHint:function(){var randomLetter=this.gameState.hintLetters[Math.floor(Math.random()*this.gameState.hintLetters.length)],_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var input=_step6.value;input.innerHTML.toLowerCase()===randomLetter&&(input.style.pointerEvents="none",input.style.background="#ccc")}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return randomLetter},updateHintStatus:function(){this.gameState.hints--,this.e.hintsBtn.innerHTML="Hints ("+this.gameState.hints+")"},showWord:function(){for(var randomword=this.gameState.randomWord.split(""),i=0;i<this.e.hiddenLetters.length;i++)this.e.hiddenLetters[i].innerHTML=randomword[i],this.e.hiddenLetters[i].className="game__content-letter game__content-letter--shown"},resetGame:function(){for(;this.e.wordContainer.firstChild;)this.e.wordContainer.removeChild(this.e.wordContainer.firstChild);for(;this.e.lettersGuessedCont.firstChild;)this.e.lettersGuessedCont.removeChild(this.e.lettersGuessedCont.firstChild);var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var input=_step7.value;input.style.pointerEvents="",input.style.background="#3498db"}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}this.gameState.hiddenLetters=null,this.gameState.lettersGuessed=[];var _iteratorNormalCompletion8=!0,_didIteratorError8=!(this.gameState.lives=6),_iteratorError8=void 0;try{for(var _step8,_iterator8=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){_step8.value.style.pointerEvents=""}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}this.e.hintsBtn.style.pointerEvents="",this.gameState.hints=3,this.gameState.category=this.getCategory(),this.e.categoryTitle.innerHTML="Category: "+this.gameState.category,this.e.hintsBtn.innerHTML="Hints ("+this.gameState.hints+")",this.e.hangmanImg.src="../../src/images/hangman_6.png",this.saveCategoryWordsLS()},setListeners:function(){var _this2=this,_loop=function(input){input.addEventListener("click",function(e){_this2.guess(e.target.innerHTML.toLowerCase()),input.style.pointerEvents="none",input.style.background="#ccc"})},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=this.e.inputs[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){_loop(_step9.value)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}this.e.hintsBtn.addEventListener("click",function(){0!==_this2.gameState.hints&&0!==_this2.gameState.lives?(_this2.guess(_this2.useHint()),_this2.updateHintStatus()):alert("Hints are not usable")}),this.e.nextRoundBtn.addEventListener("click",function(){_this2.resetGame()})},init:function(){this.gameState.category=this.getCategory(),this.e.categoryTitle.innerHTML="Category: "+this.gameState.category,this.e.hintsBtn.innerHTML="Hints ("+this.gameState.hints+")",this.e.hangmanImg.src="../../src/images/hangman_6.png",this.saveCategoryWordsLS(),this.setListeners()}};appManager.init();